/**
 * @copyright Zack Qattan 2024
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).NativeWebKit={})}(this,(function(e){"use strict";const t=!1;function i(){}const s=console.log.bind(console),r=console.warn.bind(console),a=console.error.bind(console),n=console.assert.bind(console);class c{static#e={};constructor(e){if(c.#e[e])throw new Error(`"${e}" console already exists`);c.#e[e]=this}#t={log:t,warn:t,error:t};setLevelFlags(e){Object.assign(this.#t,e)}static setLevelFlagsForType(e,t){if(!this.#e[e])throw new Error(`no console found with type "${e}"`);this.#e[e].setLevelFlags(t)}static setAllLevelFlags(e){for(const t in this.#e)this.#e[t].setLevelFlags(e)}static create(e,t){return this.#e[e]||new c(e)}get log(){return this.#t.log?s:i}get warn(){return this.#t.warn?r:i}get error(){return this.#t.error?a:i}get assert(){return this.#t.assert?n:i}assertWithError(e,t){if(!e)throw new Error(t)}assertTypeWithError(e,t){this.assertWithError(typeof e==t,`value of type "${typeof e}" not of type "${t}"`)}}function o(e,t){return c.create(e,t)}const h=o("EventDispatcher",{log:!1});class l{constructor(e){h.assertWithError(Array.isArray(e),"eventTypes must be an array"),this.#i=e}#i;#s(e){return!this.#i||this.#i.includes(e)}#r(e){h.assertWithError(this.#s(e),`invalid event type "${e}"`)}#a;addEventListener(e,t,i){if(h.log(`adding "${e}" eventListener`,t),this.#r(e),this.#a||(this.#a={}),i?.once){const i=t;t=function t(s){i.apply(this,arguments),this.removeEventListener(e,t)}}const s=this.#a;s[e]||(s[e]=[]),s[e].includes(t)||s[e].push(t)}hasEventListener(e,t){return h.log(`has "${e}" eventListener?`,t),this.#r(e),this.#a?.[e]?.includes(t)}removeEventListener(e,t){if(h.log(`removing "${e}" eventListener`,t),this.#r(e),this.hasEventListener(e,t)){const i=this.#a[e].indexOf(t);return this.#a[e].splice(i,1),!0}return!1}dispatchEvent(e){if(this.#r(e.type),this.#a?.[e.type]){e.target=this;const t=this.#a[e.type].slice(0);for(let i=0,s=t.length;i<s;i++)t[i].call(this,e)}}get _prefix(){return""}formatMessage(e){const t={...e};return t.type=`${this._prefix}-${e.type}`,t}}const d=o("platformUtils",{log:!1}),{userAgent:p}=navigator,g=/Safari/i.test(p)&&!/Chrome/i.test(p),u=/NativeWebKit/i.test(p);var v=Boolean(window.isNativeWebKitSafariExtensionInstalled);const f=async()=>!!(v=v||Boolean(window.isNativeWebKitSafariExtensionInstalled))||(d.log("checking if Safari Extension is installed..."),new Promise((e=>{const t=()=>{d.log("Safari Extension is installed"),v=!0,e(!0)};window.addEventListener("nativewebkit-extension-is-installed",t,{once:!0}),window.dispatchEvent(new Event("is-nativewebkit-extension-installed")),window.setTimeout((()=>{v||(d.log("Safari Extension is not installed"),window.removeEventListener("nativewebkit-extension-is-installed",t),e(!1))}),1)})));const y=async()=>!!(u||v)||await f(),m=/iPad|iPhone|iPod/.test(p),S=/Macintosh/.test(p),b=o("messaging",{log:!1}),k=new Set;const U={};function I(e,t){b.log(`adding callback with prefix "${t}"`,e),U[t]||(U[t]=[]),U[t].push(e)}function w(e){Array.isArray(e)||(e=[e]),e=e.flatMap((e=>"messages"==e.type?e.messages:e)),b.log("nativewebkit-receive messages",e),e.forEach((e=>{const[t,i]=e.type.split("-");b.log(`received "${t}" message of type "${i}"`,e),e.type=i,U[t]&&0!=U[t].length?U[t].forEach((t=>{b.log("triggering callback",t,"for message",e),t(e)})):b.warn("no callbacks listening for prefix",t)}))}window.__NATIVEWEBKIT_MESSAGING_FLAG__||(window.__NATIVEWEBKIT_MESSAGING_FLAG__=!0,b.log('adding "nativewebkit-receive" window listener'),window.addEventListener("nativewebkit-receive",(e=>{w(e.detail)})),window.addEventListener("load",(()=>{b.log("triggering window.load events...");const e=U["window.load"]?.map((e=>e())).flat().filter(Boolean);e.length>0&&A(e)})),window.addEventListener("unload",(()=>{b.log("triggering window.unload events...");const e=U["window.unload"]?.map((e=>e())).flat().filter(Boolean);e.length>0&&A(e)})));var C,E,T=[];async function A(e,t=!0){if(await y()){if(b.log("requesting to send message",e,"send immediately?",t),!e&&0==T.length)return void b.warn("no messages received, and no pending messages");if(e&&(0==T.length&&(C=new Promise((e=>{E=e}))),T.push(e),T=T.flat()),0==T.length)return void b.log("no messages to send");if(!t)return C;if(b.log("sending messages to app...",T),u){const e=await webkit.messageHandlers.nativewebkit_reply.postMessage(T);b.log("app response",e),e&&w(e),E(!0)}else{const e=function(){for(var e=0;k.has(e);)e++;return k.add(e),e}();window.dispatchEvent(new CustomEvent("nativewebkit-send",{detail:{message:T,id:e}})),window.addEventListener(`nativewebkit-receive-${e}`,(t=>{const i=t.detail;b.log(`did receive message for nativewebkit-receive-${e}?`,i),i||b.error(`didn't receive message for nativewebkit-receive-${e}`),E(i),k.delete(e)}),{once:!0})}return T.length=0,C}b.warn("NativeWebKit.js is not enabled - run in the NativeWebKit app or enable the NativeWebKit Safari Web Extension")}const D=o("mathUtils",{log:!1});function O(e,t){return 0===t?e:O(t,e%t)}function P(e){if(D.log("finding greatestCommonFactor of numbers",e),0==(e=e.filter((e=>e>0))).length)return null;const t=e.reduce(((e,t)=>O(e,t)));return D.log("greatestCommonFactor",t),0==t?null:t}const M=o("AppMessagePoll",{log:!1});class L{#n=!1;async#c(){if(!await y())return!1;if(u)return this.#n;return await f()}static#o=[];static#h(e){return this.#o.includes(e)?(M.log("poll already included"),this.#o.indexOf(e)):this.#o.push(e)}static#l(e){return this.#o.includes(e)?(e.stop(),this.#o.splice(e,e.#d),this.#p(),!0):(M.log("poll wasn't included"),!1)}get#d(){return L.#o.indexOf(this)}#g;#u="";#v;#f=0;get interval(){return this.#v}set interval(e){M.assertWithError(e>0,`invalid interval ${e}ms`),e!=this.#v?(this.#v=e,this.#y&&L.#p()):M.warn("assigning same interval")}constructor(e,t,i,s=!1){if("function"==typeof e){const t=e;this.#g=t}else{const t=e;this.#g=()=>t}this.#u=t,this.#v=i,this.#n=s,L.#h(this)}static#m=null;static get#S(){return null!=this.#m}static#b=null;static get#k(){return this.#o.filter((e=>e.#U))}static get#I(){return this.#k.map((e=>e.#v))}static#w(){var e=P(this.#I);if(M.log(`new interval ${e}`),this.#b!=e)return M.log(`interval updated from ${this.#b} to ${e}`),this.#b=e,!0}static async#C(){const e=Date.now(),t=this.#k.filter((t=>e-t.#f>=t.#v)),i=t.map((e=>{var t=e.#g();return t?(Array.isArray(t)||(t=[t]),t=t.map((t=>((t=Object.assign({},t)).type=`${e.#u}-${t.type}`,t)))):[]})).flat();if(M.log("messages",i),i.length>0){const e=await A(i);M.log("didReceiveMessage?",e),e||M.error("app didn't receive message")}else M.log("no messages to send");t.forEach((t=>t.#f=e))}static#E(){this.#S?M.log("tried to start AppMessagePoll when it's already running"):null!=this.#b?(M.log(`starting interval at ${this.#b}`),this.#m=window.setInterval(this.#C.bind(this),this.#b)):M.log("null interval")}static#T(){this.#S?(window.clearInterval(this.#m),this.#m=null):M.log("tried to stop AppMessagePoll when it already isn't running")}static#p(e=!1){if(!this.#S&&!e)return;const t=this.#w();this.#S||t?(M.log("restarting..."),this.#T(),this.#E()):M.log("no need to restart")}#U=!1;get#y(){return L.#S&&this.#U}async start(){await this.#c()&&(this.#y?M.log("poll is already running"):(this.#U=!0,L.#p(!0)))}stop(){this.#y&&(this.#U=!1,L.#p())}destroy(){M.log("destroying poll",this),L.#l(this)}}const V=o("HeadphoneMotionManager",{log:!1});class W{static#A=["isAvailable","isActive","motionData","sensorLocation"];get eventTypes(){return W.#A}#D=new l(this.eventTypes);addEventListener(e,t,i){return this.#D.addEventListener(e,t,i)}removeEventListener(e,t){return this.#D.removeEventListener(e,t)}hasEventListener(e,t){return this.#D.hasEventListener(e,t)}#O(e){return this.#D.dispatchEvent(e)}static#P=new W;static get shared(){return this.#P}#u="hm";#M(e){return e.map((e=>Object.assign({},e,{type:`${this.#u}-${e.type}`})))}constructor(){V.assertWithError(!this.shared,"HeadphoneMotionManager is a singleton - use HeadphoneMotionManager.shared"),I(this.#L.bind(this),"window.load"),I(this.#V.bind(this),this.#u),I(this.#W.bind(this),"window.unload")}#L(){const e=[];return this.#R&&e.push({type:"isAvailable"}),this.#M(e)}#W(){const e=[];return this.#$&&this.#_&&e.push({type:"stopUpdates"}),this.#M(e)}async#x(e){return e.type=`${this.#u}-${e.type}`,A(e)}#R=!1;get checkAvailabilityOnLoad(){return this.#R}set checkAvailabilityOnLoad(e){V.assertTypeWithError(e,"boolean"),this.#R=e}#_=!0;get stopUpdatesOnUnload(){return this.#_}set stopUpdatesOnUnload(e){V.assertTypeWithError(e,"boolean"),this.#_=e}#V(e){V.log(`received background message of type ${e.type}`,e);const{type:t}=e;switch(t){case"isAvailable":this.#N(e.isAvailable);break;case"isActive":this.#j(e.isActive);break;case"getData":this.#F(e.motionData);break;default:throw Error(`uncaught message type ${t}`)}}#B=null;get isAvailable(){return Boolean(this.#B)}#G(){V.assert(this.isAvailable,"not available")}#N(e){this.#B!=e&&(this.#B=e,V.log(`updated isAvailable to ${e}`),this.#O({type:"isAvailable",message:{isAvailable:this.isAvailable}}),this.#B&&this.#K())}async#H(){return V.log("checking isAvailable..."),this.#x({type:"isAvailable"})}#$=null;get isActive(){return Boolean(this.#$)}#j(e){this.#$!=e&&(this.#$=e,V.log(`updated isActive to ${this.isActive}`),this.#O({type:"isActive",message:{isActive:this.isActive}}),this.#q.stop(),this.#$?(V.log("starting motion data poll"),this.#z.start()):(V.log("stopping motion data poll"),this.#z.stop()))}async#K(){return V.log("checking isActive"),this.#x({type:"isActive"})}#q=new L({type:"isActive"},this.#u,50,!0);async startUpdates(){if(this.#G(),!this.isActive)return V.log("starting motion updates"),this.#q.start(),this.#x({type:"startUpdates"});V.warn("already active")}async stopUpdates(){if(this.#G(),this.isActive)return V.log("stopping motion updates"),this.#q.start(),this.#x({type:"stopUpdates"});V.warn("already inactive")}async toggleMotionUpdates(){return this.#G(),this.isActive?this.stopUpdates():this.startUpdates()}#J;get motionData(){return this.#J}get#Q(){return this.motionData?.timestamp||0}#X=null;get sensorLocation(){return this.#X}#Y(e){this.#X!=e&&(this.#X=e,V.log(`updated sensor location to ${e}`),this.#O({type:"sensorLocation",message:{sensorLocation:this.sensorLocation}}))}#F(e){this.#J=e,V.log("received headphone motion data",this.motionData),this.#O({type:"motionData",message:{motionData:this.motionData}}),this.#Y(e.sensorLocation)}#Z(){return{type:"getData",timestamp:this.#Q}}#z=new L(this.#Z.bind(this),this.#u,20)}var R=W.shared;function $(e,t){if("object"!=typeof e||"object"!=typeof t)return!1;const i=Object.keys(e),s=Object.keys(t);if(i.length!=s.length)return!1;return i.every((i=>i in t&&e[i]==t[i]))}const _=o("ARSession",{log:!1});class x{static#A=["worldTrackingSupport","faceTrackingSupport","bodyTrackingSupport","isRunning","frame","camera","faceAnchors","debugOptions","cameraMode","configuration","showCamera","lightEstimate","messageConfiguration","planeAnchors","bodyAnchors"];get eventTypes(){return x.#A}#D=new l(this.eventTypes);addEventListener(e,t,i){return this.#D.addEventListener(...arguments)}removeEventListener(e,t){return this.#D.removeEventListener(...arguments)}hasEventListener(e,t){return this.#D.hasEventListener(...arguments)}#O(e){return this.#D.dispatchEvent(...arguments)}static#P=new x;static get shared(){return this.#P}#u="ars";#M(e){return e.map((e=>Object.assign({},e,{type:`${this.#u}-${e.type}`})))}constructor(){_.assertWithError(!this.shared,"ARSessionManager is a singleton - use ARSessionManager.shared"),I(this.#L.bind(this),"window.load"),I(this.#V.bind(this),this.#u),I(this.#W.bind(this),"window.unload")}get isSupported(){return m&&u}#ee(){if(!this.isSupported)throw S?Error("AR Session is not supported on Mac"):Error("AR Session not supported in iOS Safari")}#te(){_.assertWithError(this.isRunning,"ARSession is not running")}async#x(e){return e.type=`${this.#u}-${e.type}`,A(e)}#L(){if(!this.isSupported)return;const e=[];return this.checkFaceTrackingSupportOnLoad&&e.push({type:"faceTrackingSupport"}),this.checkWorldTrackingSupportOnLoad&&e.push({type:"worldTrackingSupport"}),this.checkBodyTrackingSupportOnLoad&&e.push({type:"bodyTrackingSupport"}),this.checkIsRunningOnLoad&&e.push({type:"isRunning"}),this.checkDebugOptionsOnLoad&&e.push({type:"debugOptions"}),this.checkCameraModeOnLoad&&e.push({type:"cameraMode"}),this.checkShowCameraOnLoad&&e.push({type:"showCamera"}),this.#M(e)}#W(){if(!this.isSupported)return;const e=[];return this.pauseOnUnload&&this.isRunning&&e.push({type:"pause"}),this.#M(e)}#ie={isSupported:null,supportsUserFaceTracking:null};get worldTrackingSupport(){return this.#ie}#se(e){$(this.#ie,e)||(this.#ie=e,_.log("updated worldTrackingSupport",e),this.#O({type:"worldTrackingSupport",message:{worldTrackingSupport:this.worldTrackingSupport}}))}#re=!1;get checkWorldTrackingSupportOnLoad(){return this.#re}set checkWorldTrackingSupportOnLoad(e){_.assertTypeWithError(e,"boolean"),this.#re=e}#ae={isSupported:null};get bodyTrackingSupport(){return this.#ae}#ne(e){$(this.#ae,e)||(this.#ae=e,_.log("updated bodyTrackingSupport",e),this.#O({type:"bodyTrackingSupport",message:{bodyTrackingSupport:this.bodyTrackingSupport}}))}#ce=!1;get checkBodyTrackingSupportOnLoad(){return this.#ce}set checkBodyTrackingSupportOnLoad(e){_.assertTypeWithError(e,"boolean"),this.#ce=e}#oe={isSupported:null,supportsWorldTracking:null};get faceTrackingSupport(){return this.#oe}#he(e){$(this.#oe,e)||(this.#oe=e,_.log("updated faceTrackingSupport",e),this.#O({type:"faceTrackingSupport",message:{faceTrackingSupport:this.faceTrackingSupport}}))}#le=!1;get checkFaceTrackingSupportOnLoad(){return this.#le}set checkFaceTrackingSupportOnLoad(e){_.assertTypeWithError(e,"boolean"),this.#le=e}#y=!1;get isRunning(){return this.#y}#de(e){this.#y!=e&&(this.#y=e,_.log(`updated isRunning to ${e}`),this.#O({type:"isRunning",message:{isRunning:this.isRunning}}),this.isRunning&&this.#pe())}#ge=!1;get checkIsRunningOnLoad(){return this.#ge}set checkIsRunningOnLoad(e){_.assertTypeWithError(e,"boolean"),this.#ge=e}#ue=!0;get pauseOnUnload(){return this.#ue}set pauseOnUnload(e){_.assertTypeWithError(e,"boolean"),this.#ue=e}#ve(e){switch(_.log("assertConfigurationIsValid",e),_.assertWithError(e,"configuration required to run ARSession"),_.assertWithError(e.type,'"type" property required in configuration"'),_.assertWithError(this.allConfigurationTypes.includes(e.type),`invalid configuration type "${e.type}"`),e.type){case"worldTracking":const t=Object.keys(e).find((e=>"type"!==e&&!this.#fe.includes(e)));_.assertWithError(!t,`invalid worldTracking configuration key "${t}"`);const i=e;_.assertWithError(null!=this.worldTrackingSupport.isSupported,"check for world tracking support before running an AR session"),_.assertWithError(this.worldTrackingSupport.isSupported,"your device doesn't support world tracking"),_.assertWithError(!i.userFaceTrackingEnabled||this.worldTrackingSupport.supportsUserFaceTracking,"your device doesn't support user face tracking with world tracking");break;case"faceTracking":const s=Object.keys(e).find((e=>"type"!==e&&!this.#ye.includes(e)));_.assertWithError(!s,`invalid faceTracking configuration key "${s}"`);const r=e;_.assertWithError(null!=this.#oe.isSupported,"check for face tracking support before running an AR session"),_.assertWithError(this.faceTrackingSupport.isSupported,"your device doesn't support face tracking"),_.assertWithError(!r.isWorldTrackingEnabled||this.faceTrackingSupport.supportsWorldTracking,"your device doesn't support user world tracking with face tracking");break;case"bodyTracking":break;default:throw Error(`uncaught configuration type "${e.type}"`)}}async run(e){return this.#ee(),this.#ve(e),_.log("running with configuraton",e),this.#x({type:"run",configuration:e})}async pause(){return _.log("pause..."),this.#x({type:"pause"})}#me=["worldTracking","faceTracking","bodyTracking"];get allConfigurationTypes(){return this.#me}#fe=["userFaceTrackingEnabled","planeDetection","frameSemantics"];#ye=["isWorldTrackingEnabled","maximumNumberOfTrackedFaces"];#Se=null;get configuration(){return this.#Se}async#pe(){return this.#ee(),this.#te(),_.log("checking configuration..."),this.#x({type:"configuration"})}#be(e){this.#Se=e,_.log("updated configuration",this.configuration),this.#O({type:"configuration",message:{configuration:this.configuration}})}#ke=null;get frame(){return this.#ke}#Ue(e){this.#ke=e,_.log("received frame",this.frame),this.#O({type:"frame",message:{frame:this.frame}}),this.#Ie(e.camera),e.lightEstimate&&this.#we(e.lightEstimate),this.#Ce(e.faceAnchors||[]),this.#Ee(e.planeAnchors||[]),this.#Te(e.bodyAnchors||[])}#Ae=null;get camera(){return this.#Ae}#Ie(e){this.#Ae=e,_.log("received camera",this.camera),this.#O({type:"camera",message:{camera:this.camera}})}#De=null;get lightEstimate(){return this.#De}#we(e){this.#De=e,_.log("received lightEstimate",this.lightEstimate),this.#O({type:"lightEstimate",message:{lightEstimate:this.lightEstimate}})}#Oe=null;get faceAnchors(){return this.#Oe}#Ce(e){this.#Oe=e,_.log("received faceAnchors",this.faceAnchors),this.#O({type:"faceAnchors",message:{faceAnchors:this.faceAnchors}})}#Pe=null;get planeAnchors(){return this.#Pe}#Ee(e){this.#Pe=e,_.log("received planeAnchors",this.planeAnchors),this.#O({type:"planeAnchors",message:{planeAnchors:this.planeAnchors}})}#Me=null;get bodyAnchors(){return this.#Me}#Te(e){this.#Me=e,_.log("received bodyAnchors",this.bodyAnchors),this.#O({type:"bodyAnchors",message:{bodyAnchors:this.bodyAnchors}})}#Le=["none","showAnchorGeometry","showAnchorOrigins","showFeaturePoints","showPhysics","showSceneUnderstanding","showStatistics","showWorldOrigin"];get allDebugOptions(){return this.#Le}#Ve=null;get debugOptions(){return this.#Ve}#We(e){this.#Ve=e,_.log("received debugOptions",this.debugOptions),this.#O({type:"debugOptions",message:{debugOptions:this.debugOptions}})}async setDebugOptions(e){this.#ee(),_.assertWithError("object"==typeof e,"debugOptions must be an object",e);const t=Object.keys(e).find((e=>!this.#Le.includes(e)));return _.assertWithError(!t,`invalid debugOptions key ${t}`),_.log("setting debugOptions...",e),this.#x({type:"debugOptions",debugOptions:e})}#Re=!1;get checkDebugOptionsOnLoad(){return this.#Re}set checkDebugOptionsOnLoad(e){_.assertTypeWithError(e,"boolean"),this.#Re=e}#$e=["ar","nonAR"];get allCameraModes(){return this.#$e}#_e=null;get cameraMode(){return this.#_e}async setCameraMode(e){this.#ee();const t=this.#$e.includes(e);if(_.assertWithError(t,`invalid cameraMode "${e}"`),e!=this.#_e)return _.log("setting cameraMode...",e),this.#x({type:"cameraMode",cameraMode:e});_.log(`cameraMode is already set to "${this.#_e}"`)}#xe=!1;get checkCameraModeOnLoad(){return this.#xe}set checkCameraModeOnLoad(e){_.assertTypeWithError(e,"boolean"),this.#xe=e}#Ne(e){this.#_e!=e&&(this.#_e=e,_.log(`updated cameraMode to ${this.cameraMode}`),this.#O({type:"cameraMode",message:{cameraMode:this.cameraMode}}))}#je=null;get showCamera(){return this.#je}#Fe(e){this.#je!=e&&(this.#je=e,_.log(`updated showCamera to ${this.showCamera}`),this.#O({type:"showCamera",message:{showCamera:this.showCamera}}))}#Be=!1;get checkShowCameraOnLoad(){return this.#Be}set checkShowCameraOnLoad(e){_.assertTypeWithError(e,"boolean"),this.#Be=e}async setShowCamera(e){if(this.#ee(),e!=this.#je)return _.log("setting showCamera...",e),this.#x({type:"showCamera",showCamera:e});_.log(`showCamera is already set to "${this.#je}"`)}#Ge={faceAnchorBlendshapes:!1,faceAnchorGeometry:!1,faceAnchorEyes:!1};get messageConfiguration(){return this.#Ge}async setMessageConfiguration(e){return this.#ee(),_.log("setting messageConfiguration...",e),this.#x({type:"messageConfiguration",messageConfiguration:e})}#Ke(e){this.#Ge=e,_.log("updated messageConfiguration",this.messageConfiguration),this.#O({type:"messageConfiguration",message:{messageConfiguration:this.messageConfiguration}})}#V(e){_.log(`received background message of type ${e.type}`,e);const{type:t}=e;switch(t){case"faceTrackingSupport":_.log("received faceTrackingSupport message",e),this.#he(e.faceTrackingSupport);break;case"worldTrackingSupport":_.log("received worldTrackingSupport message",e),this.#se(e.worldTrackingSupport);break;case"bodyTrackingSupport":_.log("received bodyTrackingSupport message",e),this.#ne(e.bodyTrackingSupport);break;case"isRunning":_.log("received isRunning message",e),this.#de(e.isRunning);break;case"configuration":_.log("received configuration message",e),this.#be(e.configuration);break;case"debugOptions":_.log("received debugOptions message",e),this.#We(e.debugOptions);break;case"cameraMode":_.log("received cameraMode message",e),this.#Ne(e.cameraMode);break;case"frame":_.log("received frame message",e),this.#Ue(e.frame);break;case"showCamera":_.log("received showCamera message",e),this.#Fe(e.showCamera);break;case"messageConfiguration":_.log("received messageConfiguration message",e),this.#Ke(e.messageConfiguration);break;default:throw Error(`uncaught message type ${t}`)}}}var N=x.shared;const j=o("Timer",{log:!1});class F{constructor(e,t,i=!1){j.log("creating timer",{callback:e,interval:t,runImmediately:i}),this.#He=e,this.#v=t,i&&this.start()}#He;#v;get interval(){return this.#v}set interval(e){j.assertTypeWithError(e,"number"),e!=this.#v?(this.#v=e,this.isRunning&&this.#p()):j.warn("same interval value",e)}#m=null;get isRunning(){return null!=this.#m}start(){j.assertWithError(!this.isRunning,"timer already running"),this.#m=window.setInterval(this.#He,this.#v)}stop(){this.isRunning?(window.clearInterval(this.#m),this.#m=null):j.assert("timer is already not running")}#p(){this.stop(),this.start()}}var B=Object.freeze({__proto__:null,areObjectsEqual:$,checkIfNativeWebKitEnabled:y,checkIfSafariExtensionIsInstalled:f,colorTemperatureToRGB:function(e){var t,i,s,r=e/100;return r<=66?(t=255,i=r,i=99.4708025861*Math.log(i)-161.1195681661,r<=19?s=0:(s=r-10,s=138.5177312231*Math.log(s)-305.0447927307)):(t=r-60,t=329.698727446*Math.pow(t,-.1332047592),i=r-60,i=288.1221695283*Math.pow(i,-.0755148492),s=255),[t,i,s].map((e=>function(e,t,i){return e<t?t:e>i?i:e}(e/255,0,1)))},isInApp:u,isInSafari:g,isMac:S,is_iOS:m,openInApp:()=>{if(g){const e=document.createElement("a"),t=`nativewebkit://${location.href}`;d.log("attempting to open current link in App...",location.href,t),e.href=t,e.click()}else d.warn("unable to open link in app - not in safari")},setAllConsoleLevelFlags:function(e){c.setAllLevelFlags(e)},setConsoleLevelFlagsForType:function(e,t){c.setLevelFlagsForType(e,t)}});const G=o("CBCentral",{log:!1});class K{static#A=["state","isAvailable","isScanning","discoveredPeripheral","expiredDiscoveredPeripheral","peripheralConnectionState","peripheralRSSI","discoveredService","discoveredServices","discoveredCharacteristics","discoveredCharacteristic","characteristicNotifyValue","characteristicValue"];get eventTypes(){return K.#A}#D=new l(this.eventTypes);addEventListener(e,t,i){return this.#D.addEventListener(...arguments)}removeEventListener(e,t){return this.#D.removeEventListener(...arguments)}hasEventListener(e,t){return this.#D.hasEventListener(...arguments)}#O(e){return this.#D.dispatchEvent(e)}static#P=new K;static get shared(){return this.#P}#u="cbc";#M(e){return e.map((e=>Object.assign({},e,{type:`${this.#u}-${e.type}`})))}constructor(){G.assertWithError(!this.shared,"CBCentralManager is a singleton - use CBCentralManager.shared"),I(this.#L.bind(this),"window.load"),I(this.#V.bind(this),this.#u),I(this.#W.bind(this),"window.unload")}get isSupported(){return!0}#ee(){if(!this.isSupported)throw Error("not supported")}#L(){const e=[];return this.checkStateOnLoad&&e.push({type:"state"}),this.checkConnectedPeripheralsOnLoad&&e.push({type:"connectedPeripherals",serviceUUIDs:[]}),this.#M(e)}#W(){const e=[];return this.#qe&&this.#ze&&e.push({type:"stopScan"}),this.#Je&&this.#Qe.length>0&&e.push({type:"disconnectAll"}),this.#M(e)}async#x(e){return e.type=`${this.#u}-${e.type}`,A(e)}#Xe=!1;get checkStateOnLoad(){return this.#Xe}set checkStateOnLoad(e){G.assertTypeWithError(e,"boolean"),this.#Xe=e}#ze=!0;get stopScanOnUnload(){return this.#ze}set stopScanOnUnload(e){G.assertTypeWithError(e,"boolean"),this.#ze=e}#Je=!0;get disconnectOnUnload(){return this.#Je}set disconnectOnUnload(e){G.assertTypeWithError(e,"boolean"),this.#Je=e}#Ye=null;get state(){return this.#Ye||"unknown"}#Ze(e){this.#Ye!=e&&(this.#Ye=e,G.log("updated state",this.state),this.#O({type:"state",message:{state:this.state}}),this.#O({type:"isAvailable",message:{isAvailable:this.isAvailable}}),"poweredOn"==this.state&&this.#et(),"unknown"==this.#Ye?this.#tt.start():this.#tt.stop())}#tt=new L({type:"state"},this.#u,500);get isAvailable(){return"poweredOn"==this.state}#G(){this.#ee(),G.assertWithError(this.isAvailable,"not available")}#qe=null;get isScanning(){return Boolean(this.#qe)}#it(e){this.#qe!=e&&(this.#qe=e,G.log(`updated isScanning to ${this.#qe}`),this.#O({type:"isScanning",message:{isScanning:this.isScanning}}),this.#st.stop(),this.isScanning?(this.#rt.start(),this.#at.start()):(this.#rt.stop(),this.#at.stop()))}async#et(){return G.log("checking isScanning"),this.#x({type:"isScanning"})}#st=new L({type:"isScanning"},this.#u,50);#nt(){const e=Date.now();Object.entries(this.#ct).forEach((([t,i])=>{e-i.lastTimeUpdated>4e3&&(delete this.#ct[t],this.#O({type:"expiredDiscoveredPeripheral",message:{expiredDiscoveredPeripheral:i}}))}))}#at=new F(this.#nt.bind(this),1e3);async startScan(e){return this.#G(),G.assertWithError(!this.isScanning,"already scanning"),G.log("starting scan",e),this.#ct.length=0,this.#st.start(),this.#x({type:"startScan",scanOptions:e})}async stopScan(){return this.#G(),G.assertWithError(this.isScanning,"already not scanning"),G.log("stopping scan"),this.#st.start(),this.#x({type:"stopScan"})}async toggleScan(){return this.#G(),this.isScanning?this.stopScan():this.startScan()}#ct={};get discoveredPeripherals(){return this.#ct}#ot(e){G.assertWithError(e in this.#ct,`no discovered peripheral with identifier "${e}" found`)}#ht(e){e.forEach((e=>{this.#lt(e)}))}#lt(e){var t=this.#ct[e.identifier];t?Object.assign(t,e):(this.#ct[e.identifier]=e,t=e),t.lastTimeUpdated=Date.now(),this.#O({type:"discoveredPeripheral",message:{discoveredPeripheral:t}})}#rt=new L({type:"discoveredPeripherals"},this.#u,200);#Qe={};get peripherals(){return this.#Qe}#dt(e){const t=this.#Qe[e];return G.assertWithError(t,`no peripheral with identifier "${e}" found`),t}#pt(e){const t=this.#dt(e);return G.assertWithError("connected"==t.connectionState,"peripheral is not connected"),t}#gt(e,t){const i=this.#dt(e),s=i.services[t];return G.assert(s,`serviceUUID ${t} not found`),{peripheral:i,service:s}}#ut(e,t,i){const{peripheral:s,service:r}=this.#gt(e,t),a=r.characteristics[i];return G.assert(a,`characteristicUUID ${t} not found`),{peripheral:s,service:r,characteristic:a}}#vt(e,t,i,s){const{peripheral:r,service:a,characteristic:n}=this.#ut(e,t,i),c=n.descriptors[s];return G.assert(c,`descriptorUUID ${s} not found`),{peripheral:r,service:a,characteristic:n,descriptor:c}}async connect(e){this.#G();var t=this.#Qe[e.identifier];if(t)G.assertWithError("connected"!=t.connectionState&&!t.connectionState?.endsWith("ing"),`peripheral is in connectionState "${t.connectionState}"`);else{const i=this.#ct[e.identifier];this.#ot(e.identifier),t={identifier:e.identifier,name:i.name},this.#Qe[t.identifier]=t}return G.log("connecting to peripheral",e),t.connectionState=null,this.#ft.start(),u&&this.#yt({identifier:e.identifier,connectionState:"connecting"}),this.#x({type:"connect",connectOptions:e})}async disconnect(e){const t=this.#dt(e);return G.assertWithError(!t.connectionState.includes("disconnect"),"peripheral is already disconnected or disconnecting"),t.connectionState=null,this.#ft.start(),G.log("disconnecting from peripheral...",t),u&&this.#yt({identifier:e,connectionState:"disconnecting"}),this.#x({type:"disconnect",identifier:e})}#mt(){const e=Object.values(this.#Qe).filter((e=>!e.connectionState||e.connectionState?.endsWith("ing")));return e.length>0?e.map((e=>({type:"peripheralConnectionState",identifier:e.identifier}))):(this.#ft.stop(),[])}#ft=new L(this.#mt.bind(this),this.#u,200);#St=!1;get checkConnectedPeripheralsOnLoad(){return this.#St}set checkConnectedPeripheralsOnLoad(e){G.assertTypeWithError(e,"boolean"),this.#St=e}checkConnectedPeripherals(e){G.log("checkConnectedPeripherals",{serviceUUIDs:e}),this.#x({type:"connectedPeripherals",serviceUUIDs:e})}#bt(e){e.forEach((e=>{this.#Qe[e.identifier]=e,this.#yt({identifier:e.identifier,connectionState:e.connectionState},!0),Object.values(e.services).length>0&&this.#kt({identifier:e.identifier,services:e.services},!0)}))}#yt(e,t=!1){const i=this.#dt(e.identifier);(i.connectionState!=e.connectionState||t)&&(i.connectionState=e.connectionState,this.#O({type:"peripheralConnectionState",message:{peripheral:i}}),this.#Ut?this.#It.start():this.#It.stop())}get#Ut(){return Object.values(this.peripherals).some((e=>"connected"==e.connectionState))}#It=new L({type:"disconnectedPeripherals"},this.#u,2e3);#wt(e){e.forEach((e=>{this.#yt({identifier:e,connectionState:"disconnected"})}))}async readPeripheralRSSIs(...e){e.forEach((e=>{this.#dt(e)._pendingRSSI=!0})),e.length>0&&(this.#Ct.start(),this.#x({type:"readRSSI",identifiers:e}))}async readPeripheralRSSI(e){return this.readPeripheralRSSIs(e)}#Ct=new L(this.#Et.bind(this),this.#u,200);#Et(){const e=Object.values(this.#Qe).filter((e=>e._pendingRSSI));return e.length>0?{type:"getRSSI",peripherals:e.map((e=>({identifier:e.identifier,timestamp:e.rssiTimestamp})))}:(this.#Ct.stop(),[])}#Tt(e){e.forEach((e=>{const t=this.#Qe[e.identifier];t?(t.rssi=e.rssi,t.rssiTimestamp=e.timestamp,t._pendingRSSI=!1,this.#O({type:"peripheralRSSI",message:{peripheral:t}}),this.#At&&this.#Ct.stop()):G.error("no peripheral found for peripheralRSSI",e)}))}get#At(){return Object.values(this.peripherals).some((e=>e._pendingRSSI))}async discoverServices(e,t){const i=this.#pt(e);if(t&&(t=t.filter((e=>i.services?.[e]?(G.error("already have service",{peripheral:i,serviceUUID:e}),!1):!i._pendingServices?.[e]&&!i._pendingIncludedServices?.[e]))),G.log("discovering services",{identifier:e,serviceUUIDs:t}),i._pendingServices||(i._pendingServices=[]),t?.length>0&&i._pendingServices.push(...t),!t||t.length>0)return this.#Dt.start(),this.#x({type:"discoverServices",identifier:e,serviceUUIDs:t})}async discoverService(e,t){return this.discoverServices(e,[t])}#Dt=new L(this.#Ot.bind(this),this.#u,100);#Ot(){const e=[];return Object.values(this.#Qe).filter((e=>"connected"==e.connectionState&&e._pendingServices)).forEach((t=>{const i={type:"getServices",identifier:t.identifier,serviceUUIDs:t._pendingServices};0==t._pendingServices.length&&(i.serviceUUIDs=null),e.push(i)})),0==e.length&&this.#Dt.stop(),e}async discoverIncludedServices(e,t,i){const s=this.#pt(e);if(this.#gt(e,t),i&&(i=i.filter((e=>s.services[e]?(G.error("already have includedService",{peripheral:s,includedServiceUUID:e}),!1):!s._pendingServices?.[t]&&!s._pendingIncludedServices?.[t]))),G.log("discovering includedServices",{identifier:e,serviceUUID:t,includedServiceUUIDs:i}),s._pendingServices||(s._pendingServices=[]),i?.length>0&&s._pendingIncludedServices.push(...i),!i||i.length>0)return this.#Pt.start(),this.#x({type:"discoverIncludedServices",identifier:e,serviceUUID:t,includedServiceUUIDs:i})}async discoverIncludedService(e,t,i){return this.discoverIncludedServices(e,t,[i])}#Pt=new L(this.#Mt.bind(this),this.#u,500);#Mt(){}async discoverCharacteristics(e,t,i){const{service:s}=this.#gt(e,t);if(i&&(i=i.filter((e=>!s.characteristics[e]||(G.error("already have characteristic",{peripheral:peripheral,characteristicUUID:e}),!1)))),G.log("discovering characteristics",{identifier:e,serviceUUID:t,characteristicUUIDs:i}),s._pendingCharacteristics||(s._pendingCharacteristics=[]),i?.length>0&&s._pendingCharacteristics.push(...i),!i||i.length>0)return this.#Lt.start(),this.#x({type:"discoverCharacteristics",identifier:e,serviceUUID:t,characteristicUUIDs:i})}async discoverCharacteristic(e,t,i){return this.discoverCharacteristics(e,t,[i])}#Lt=new L(this.#Vt.bind(this),this.#u,500);#Vt(){const e=[];return Object.values(this.#Qe).filter((e=>"connected"==e.connectionState)).forEach((t=>{Object.values(t.services).filter((e=>e._pendingCharacteristics)).forEach((i=>{const s={type:"getCharacteristics",identifier:t.identifier,serviceUUID:i.uuid,characteristicUUIDs:i._pendingCharacteristics};0==i._pendingCharacteristics.length&&delete s.characteristicUUIDs,e.push(s)}))})),0==e.length&&this.#Lt.stop(),e}async readCharacteristicValue(e,t,i){const{characteristic:s}=this.#ut(e,t,i);return G.log("reading characteristic value",{identifier:e,serviceUUID:t,characteristicUUID:i}),s._pendingValue=!0,this.#Wt.start(),this.#x({type:"readCharacteristicValue",identifier:e,serviceUUID:t,characteristicUUID:i})}async writeCharacteristicValue(e,t,i,s){const r=this.#pt(e),{service:a,characteristic:n}=this.#ut(e,t,i);return G.log("reading characteristic data",{peripheral:r,service:a,characteristic:n,data:s}),n.properties.read&&(n._pendingValue=!0,this.#Wt.start()),this.#x({type:"writeCharacteristicValue",identifier:e,serviceUUID:t,characteristicUUID:i,data:s})}#Wt=new L(this.#Rt.bind(this),this.#u,20);#Rt(){const e=[];if(Object.values(this.#Qe).forEach((t=>{if("connected"==t.connectionState){var i=!1;Object.values(t.services).some((e=>(Object.values(e.characteristics).some((e=>((e._pendingValue||e.isNotifying)&&(i=!0),i))),i))),i&&e.push({type:"updatedCharacteristicValues",identifier:t.identifier,timestamp:t._characteristicValueTimestamp||0})}})),e.length>0)return e;this.#Wt.stop()}async setCharacteristicNotifyValue(e,t,i,s){this.#pt(e);const{characteristic:r}=this.#ut(e,t,i);return G.assertWithError(r.properties.notify&&r.isNotifying!=s,`characteristic isNotifying already has value "${s}"`),G.log("setting characteristic notify value",{identifier:e,serviceUUID:t,characteristicUUID:i,notifyValue:s}),r._pendingIsNotifying=!0,this.#$t.start(),this.#x({type:"setCharacteristicNotifyValue",identifier:e,serviceUUID:t,characteristicUUID:i,notifyValue:s})}#$t=new L(this.#_t.bind(this),this.#u,100);#_t(){const e=[];return Object.values(this.#Qe).forEach((t=>{Object.values(t.services).forEach((i=>{Object.values(i.characteristics).forEach((s=>{s._pendingIsNotifying&&e.push({type:"getCharacteristicNotifyValue",identifier:t.identifier,serviceUUID:i.uuid,characteristicUUID:s.uuid})}))}))})),0==e.length&&this.#$t.stop(),e}async discoverDescriptors(e,t,i){return this.#ut(e,t,i),G.log("discovering descriptors",{identifier:e,serviceUUID:t,characteristicUUID:i}),this.#xt.start(),this.#x({type:"discoverDescriptors",identifier:e,serviceUUID:t,characteristicUUID:i})}#xt=new L(this.#Nt.bind(this),this.#u,500);#Nt(){}async readDescriptorValue(e,t,i,s,r){return this.#vt(e,t,i,s),G.log("reading descriptor value",{identifier:e,serviceUUID:t,characteristicUUID:i,descriptorUUID:s,timestamp:r}),this.#x({type:"readDescriptorValue",identifier:e,serviceUUID:t,characteristicUUID:i,descriptorUUID:s,timestamp:r})}async writeDescriptorValue(e,t,i,s,r){return this.#vt(e,t,i,s),G.log("writing descriptor value",{identifier:e,serviceUUID:t,characteristicUUID:i,descriptorUUID:s,value:r}),this.#jt.start(),this.#x({type:"writeDescriptorValue",identifier:e,serviceUUID:t,characteristicUUID:i,descriptorUUID:s,value:r})}#jt=new L(this.#Ft.bind(this),this.#u,500);#Ft(){}#kt({identifier:e,services:t},i=!1){const s=this.#pt(e);s.services||(s.services=[]);const r=Object.values(t).filter((t=>{if(!s.services[t.uuid]||i)return G.log("got service",{identifier:e,service:t}),s.services[t.uuid]=t,this.#O({type:"discoveredService",message:{discoveredService:t,peripheral:s}}),!0;G.warn("already have service",{identifier:e,service:t})}));s._pendingServices&&(s._pendingServices=s._pendingServices.filter((e=>!s.services[e])),0==s._pendingServices.length&&delete s._pendingServices),this.#O({type:"discoveredServices",message:{discoveredServices:r,peripheral:s}}),Object.values(t).forEach((t=>{Object.values(t.characteristics).length>0&&this.#Bt({identifier:e,serviceUUID:t.uuid,characteristics:t.characteristics},!0)}))}#Gt({identifier:e,serviceUUID:t,includedServices:i}){const{peripheral:s,service:r}=this.#gt(e,t),a=i.filter((t=>{if(!s.services[t.uuid])return G.log("got included service",{identifier:e,service:r,includedService:t}),s.services[t.uuid]=t,this.#O({type:"discoveredIncludedService",message:{discoveredIncludedService:t,peripheral:s,service:r}}),this.#O({type:"discoveredService",message:{discoveredService:t,peripheral:s,service:r}}),!0;G.warn("already have service",{identifier:e,includedService:t,service:r})}));this.#O({type:"discoveredIncludedServices",message:{discoveredIncludedServices:a,peripheral:s,service:r}}),this.#O({type:"discoveredServices",message:{discoveredServices:a,peripheral:s,service:r}})}#Bt({identifier:e,serviceUUID:t,characteristics:i},s=!1){const{peripheral:r,service:a}=this.#gt(e,t),n=Object.values(i).filter((t=>{G.log("got new characteristic",{identifier:e,service:a,characteristic:t}),!a.characteristics[t.uuid]||s?(a.characteristics[t.uuid]=t,this.#O({type:"discoveredCharacteristic",message:{discoveredCharacteristic:t,peripheral:r,service:a}})):G.warn("already have characteristic",{identifier:e,characteristic:t})}));a._pendingCharacteristics&&(a._pendingCharacteristics=a._pendingCharacteristics.filter((e=>!a.characteristics[e])),0==a._pendingCharacteristics.length&&delete a._pendingCharacteristics),this.#Kt&&this.#Wt.start(),this.#O({type:"discoveredCharacteristics",message:{discoveredCharacteristics:n,peripheral:r,service:a}})}#Ht({identifier:e,serviceUUID:t,characteristicUUID:i,value:s,timestamp:r}){const{peripheral:a,service:n,characteristic:c}=this.#ut(e,t,i);c.value=s,c.valueTimestamp=r,this.#O({type:"characteristicValue",message:{peripheral:a,service:n,characteristic:c}})}#qt({identifier:e,serviceUUID:t,characteristicUUID:i,isNotifying:s}){const{peripheral:r,service:a,characteristic:n}=this.#ut(e,t,i);n.isNotifying!=s&&(G.log("characteristic.isNotifying updated",{characteristic:n}),n.isNotifying=s,n._pendingIsNotifying=!1,this.#O({type:"characteristicNotifyValue",message:{peripheral:r,service:a,characteristic:n}}),this.#Kt&&this.#Wt.start())}get#Kt(){return Object.values(this.peripherals).filter((e=>"connected"==e.connectionState)).some((e=>Object.values(e.services).some((e=>Object.values(e.characteristics).some((e=>e.isNotifying))))))}#zt(e){e.forEach((e=>{const{identifier:t,serviceUUID:i,characteristicUUID:s,value:r,timestamp:a}=e,{peripheral:n,service:c,characteristic:o}=this.#ut(t,i,s);o.value=r,o.valueTimestamp=a,G.log("updated characteristicValue",{characteristic:o}),this.#O({type:"characteristicValue",message:{peripheral:n,service:c,characteristic:o}})}))}#Jt({identifier:e,serviceUUID:t,characteristicUUID:i,descriptors:s}){const{peripheral:r,service:a,characteristic:n}=this.#ut(e,t,i),c=s.filter((e=>{G.log("got new descriptor",{peripheral:r,service:a,characteristic:n,descriptor:e}),n.descriptors[e.uuid]?G.warn("already have descriptor",{peripheral:r,service:a,characteristic:n,descriptor:e}):(n.descriptors[e.uuid]=e,this.#O({type:"discoveredDescriptor",message:{discoveredDescriptor:e,peripheral:r,service:a,characteristic:n}}))}));this.#O({type:"discoveredDescriptors",message:{peripheral:r,service:a,characteristic:n,discoveredDescriptors:c}})}#Qt({identifier:e,serviceUUID:t,characteristicUUID:i,descriptorUUID:s,value:r}){const{peripheral:a,service:n,characteristic:c,descriptor:o}=this.#vt(e,t,i,s);o.value=r,G.log("descriptorValue",{descriptor:o}),this.#O({type:"descriptorValue",message:{peripheral:a,service:n,characteristic:c,descriptor:o}})}#V(e){G.log(`received background message of type ${e.type}`,e);const{type:t}=e;switch(t){case"state":G.log("received state message",e.state),this.#Ze(e.state);break;case"isScanning":G.log("received isScanning message",e.isScanning),this.#it(e.isScanning);break;case"discoveredPeripheral":G.log("received discoveredPeripheral message",e.discoveredPeripheral),this.#lt(e.discoveredPeripheral);break;case"discoveredPeripherals":G.log("received discoveredPeripherals message",e.discoveredPeripherals),this.#ht(e.discoveredPeripherals);break;case"peripheralConnectionState":G.log("received peripheralConnectionState message",e.peripheralConnectionState),this.#yt(e.peripheralConnectionState);break;case"connectedPeripherals":G.log("received connectedPeripherals message",e.connectedPeripherals),this.#bt(e.connectedPeripherals);break;case"disconnectedPeripherals":G.log("received disconnectedPeripherals message",e.disconnectedPeripherals),this.#wt(e.disconnectedPeripherals);break;case"getRSSI":G.log("received getRSSI message",e.peripheralRSSIs),this.#Tt(e.peripheralRSSIs);break;case"getServices":G.log("received getServices message",e.getServices),this.#kt(e.getServices);break;case"getIncludedServices":G.log("received getIncludedServices message",e.getIncludedServices),this.#Gt(e.getIncludedServices);break;case"getCharacteristics":G.log("received getCharacteristics message",e.getCharacteristics),this.#Bt(e.getCharacteristics);break;case"getCharacteristicValue":G.log("received getCharacteristicValue message",e.getCharacteristicValue),this.#Ht(e.getCharacteristicValue);break;case"getCharacteristicNotifyValue":G.log("received getCharacteristicNotifyValue message",e.getCharacteristicNotifyValue),this.#qt(e.getCharacteristicNotifyValue);break;case"updatedCharacteristicValues":G.log("received updatedCharacteristicValues message",e.updatedCharacteristicValues),this.#zt(e.updatedCharacteristicValues);break;case"getDescriptors":G.log("received getDescriptors message",e.getDescriptors),this.#Jt(e.getDescriptors);break;case"getDescriptorValue":G.log("received getDescriptorValue message",e.getDescriptorValue),this.#Qt(e.getDescriptorValue);break;default:throw Error(`uncaught message type ${t}`)}}}var H=K.shared;e.ARSessionManager=N,e.CBCentralManager=H,e.HeadphoneMotionManager=R,e.utils=B}));
